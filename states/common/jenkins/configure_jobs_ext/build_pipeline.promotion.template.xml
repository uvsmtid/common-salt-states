<?xml version='1.0' encoding='UTF-8'?>
<hudson.plugins.promoted__builds.PromotionProcess plugin="promoted-builds@2.21">
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>

  <!-- NOTE: Maintains single active/running pipeline at a time. -->
  <blockBuildWhenDownstreamBuilding>true</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>true</blockBuildWhenUpstreamBuilding>

  <triggers/>
  <concurrentBuild>false</concurrentBuild>
  <conditions>

    {% if not job_config['condition_type'] %}

    {% elif job_config['condition_type'] == 'downstream_passed' %}

    <hudson.plugins.promoted__builds.conditions.DownstreamPassCondition>

      <jobs>{{ job_config['condition_job_list']|join(', ') }}</jobs>

      <evenIfUnstable>{{ job_config['accept_unstable'] }}</evenIfUnstable>

    </hudson.plugins.promoted__builds.conditions.DownstreamPassCondition>

    {% endif %}

  </conditions>

  <icon>{{ job_config['promotion_icon'] }}</icon>
  <buildSteps>

    <hudson.tasks.BuildTrigger>

      <childProjects>{{ job_config['trigger_jobs']|join(', ') }}</childProjects>

      <threshold>
        <name>SUCCESS</name>
        <ordinal>0</ordinal>
        <color>BLUE</color>
        <completeBuild>true</completeBuild>
      </threshold>
    </hudson.tasks.BuildTrigger>

  </buildSteps>

</hudson.plugins.promoted__builds.PromotionProcess>

