# Custom Git configuration

{% set git_config = pillar['system_features']['source_version_control_tools_config']['git'] %}

[core]

    editor = vim

    sparseCheckout = true

[color]

    ui = auto

#{#
#   Do not configure users system-wide.
#   This will force them to set author consciously.
#}#
{% if False %}
{% if 'user_config' in git_config %}
[user]

    name = {{ git_config['user_config']['name'] }}
    email = {{ git_config['user_config']['email'] }}
{% endif %}
{% endif %}

[diff]

    # Increase diff context (default: 3)
    # Generally, bigger context helps more often.
    context = 15

[alias]

    # Draw a history graph with full decoration
    glog = log --decorate=full --graph --stat

    # In addition to `glog` follow file's history beyond renames
    flog = log --decorate=full --graph --follow

    # One line commit with graph
    llog = log --decorate=full --graph --pretty=oneline --abbrev-commit

    # Merge using fast-forward only
    ffmerge = merge --ff-only

    # Merge two branches into one (avoid fast-forward), allow review
    bbmerge = merge --no-ff --no-commit

    # Shod diff of staged changes
    sdiff = diff --staged

[push]

{#
This is only supported in the latest Git versions not available on Cygwin.
#}
{% if not grains['os_platform_type'].startswith('win') %}
    # When no refspec is given, push only current branch only if
    # upstream branch's name is the same as local one.
    default = simple
{% endif %}

